# 集群连接
启用集群模式后，可以在所有这些节点上添加额外的节点和发出命令。例如，如果节点碰巧由于崩溃消失，运行在这些主机上的容器将被自动重新安排到其他可用节点上。重新调度确保您不会丢失容量，并提供高可用性。

在每一个附加节点上，您希望添加到集群中，使用Docker CLI来加入现有组。连接是通过将另一个主机指向集群的当前管理者来完成的。它是在这个例子中的第一个主机。

Docker现在使用一个额外的端口2377来管理集群。端口应该被禁止进入公共访问，并且只能由可信的用户和节点访问。我们建议使用vpn或私有网络来确保访问。

## 任务
第一个要求是获得将工人添加到集群所需的令牌。出于演示的目的，我们将通过swarm join-token向管理员询问令牌是什么。在生产中，这个令牌应该安全存储，并且只能由可信的个人访问。
```bash
token=$(docker -H 172.17.0.17:2345 swarm join-token -q worker) && echo $token
```
在第二个主机上，通过向管理员请求访问集群。令牌是作为附加参数提供的。
```bash
docker swarm join 172.17.0.17:2377 --token $token
```
默认情况下，管理者将自动接受添加到集群中的新节点。您可以使用docker node ls查看集群中的所有节点。
```bash
docker node ls
```